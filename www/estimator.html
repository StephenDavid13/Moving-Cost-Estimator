<!DOCTYPE html>
</html>
<head>
    <title>Moving Cost Estimator</title>
    <meta name="viewport" content="width=device-width,height=device-height,minimum-scale=1,maximum-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <link rel="stylesheet" href="css/index.css" /> 
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script src="js/index.js"></script>
    <script src="js/basic-nav.js"></script>
	<script src="js/create-content.js"></script>
	<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha1.js"></script>
	<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
	<script type="text/javascript">

		function CalculateSig(stringToSign, privateKey){
			var hash = CryptoJS.HmacSHA1(stringToSign, privateKey);
			var base64 = hash.toString(CryptoJS.enc.Base64);
			return encodeURIComponent(base64);
		}

		var d = new Date,
			 expiration = 3600 // 1 hour,
			 unixtime = parseInt(d.getTime() / 1000),
			 future_unixtime = unixtime + expiration,
			 publicKey = "c172c4db1d",
			 privateKey = "a630380116e6552",
			 method = "POST",
			 route = "forms/2/entries";

		stringToSign = publicKey + ":" + method + ":" + route + ":" + future_unixtime;
		sig = CalculateSig(stringToSign, privateKey);
		console.log(sig);
		
		var url = 'http://www.movinghouseapps.co.nz/gravityformsapi/forms/2/', api = '?api_key=', signature = '&signature=', expires = '&expires=';
		var url_final = url + api + publicKey + signature + sig + expires + future_unixtime;
		var url_final_1 = "http://www.movinghouseapps.co.nz/gravityformsapi/forms/2/?api_key=c172c4db1d&signature=0GFUWadt6YsaBRBjlajI1z6qFYM%3D&expires=1443367274";
		
		console.log(url_final_1);
		console.log(url_final);
		
		$.ajax({
			url: 'http://www.movinghouseapps.co.nz/gravityformsapi/forms/2/?api_key=c172c4db1d&signature=0GFUWadt6YsaBRBjlajI1z6qFYM%3D&expires=1443367274',
			type: 'POST',
			data: JSON.stringify({"1": "Google"})
		})
		
		var tmp_quote ="<form class='mini quote' enctype='multipart/form-data'>";
		tmp_quote += "<label for=find-us>How did you find us?</label><select name=find-us id=find-us><option value=Google>Google</option><option value=Customer>I'm a customer</option><option value=Friend>Referred by a Friend</option>";
		tmp_quote += "<option value=Social-Media>Social Media, Facebook etc.</option><option value=TradeMe>TradeMe</option><option value=Yellow>Yellow, Finda, Localist</option><option value=Truck>Our Trucks and Vans</option>";
		tmp_quote += "<option value=Others>Others</option></select><br />";

		tmp_quote += "<label for=full-name>Full Name*</label><input type=text name=full-name><br />";
		tmp_quote += "<label for=phone>Phone*</label><input type=number name=phone><br />";
		tmp_quote += "<label for=email>Email*</label><input type=email name=email><br />";
		tmp_quote += "<label for=confirm-email>Confirm Email*</label><input type=email name=confirm-email><br />";

		tmp_quote += "<label for=region>Region</label><select name=region id=region><option value=Auckland>Auckland</option><option value=Northland>Northland</option><option value=Coromandel>Coromandel</option>";
		tmp_quote += "<option value=Waikato>Waikato</option><option value=Bay-of-Plenty>Bay of Plenty</option><option value=East-Coast>East Coast</option><option value=Central-Plateau>Central Plateau</option>";
		tmp_quote += "<option value=Manawatu-Wanganui>Manawatu - Wanganui</option><option value=Wairarapa>Wairarapa</option><option value=Wellington>Wellington</option> <option value=Nelson>Nelson</option>";
		tmp_quote += "<option value=Marlborough>Marlborough</option><option value=West-Coast>West Coast</option><option value=Canterbury>Canterbury</option><option value=Otago>Otago</option><option value=Fiordland>Fiordland</option>";
		tmp_quote += "<option value=Southland>Southland</option></select><br />";

		tmp_quote += "<label for=pickup>Pickup Address*</label><input type=text name=pickup><br />";
		tmp_quote += "<label for=delivery-name>Delivery Address*</label><input type=text name=delivery><br />";
		tmp_quote += "<label for=notes>Notes</label><input type=text name=notes placeholder='Tell us about access, heavy items etc.'><br />";

		tmp_quote += "<button type='submit'>GET A QUOTE</button>";
		$("#quote_form").html(tmp_quote);
	</script>
</head>
<body>
</body>
</html>