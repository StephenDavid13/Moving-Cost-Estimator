<!DOCTYPE html>
</html>
<head>
    <title>Moving Cost Estimator</title>
    <meta name="viewport" content="width=device-width,height=device-height,minimum-scale=1,maximum-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <link rel="stylesheet" href="css/index.css" /> 
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script src="js/index.js"></script>
<!--	<script src="js/create-content-franks.js"></script>-->
    <script src="js/basic-nav.js"></script>    
    <script src="js/amt_article.js"></script>
<!--    <script src="js/count-articles.js"></script> -->
    <script>
        
var 
    amt_price = 0
   ,id_attribute_collector = []
;
        console.log(amt_article_info);
   
        
        
function f_set_checkbox_articles(rooms_to_create) 
{
    var  j = 0; 
    for (j; j < rooms_to_create.length ; j++)
    {      
//        console.log("AAAAA");
       var 
             tmp_get_id="get-amt-"+rooms_to_create[j].id_attribute
            ,dropDown = document.getElementById(tmp_get_id)
       ;

        for (var i=0; i<=20; i++) 
        {
            var listItem = document.createElement("option");
            listItem.text = i;
            listItem.value = i;
            dropDown.appendChild(listItem);
        }
     }
}
   
$(function()
    {
        window.f_checkbox_articles = function f_checkbox_articles(ckbx_id) 
        {
             var id_name = ckbx_id.substring(9);
             $("#"+ckbx_id).on("change", function() 
             {
                 
                $("#popup-header-"+id_name).html(id_name);
               
                 if(document.getElementById(ckbx_id).checked) 
                 {
                    $("#popup-num-rooms-"+id_name).popup("open");
                    $("#set-amt-"+id_name).on("click", function() 
                    {
                        if(document.getElementById(ckbx_id).checked) {
                            var 
                                 drp = document.getElementById("get-amt-"+id_name)
                                ,value = drp.options[ drp.options.selectedIndex ].value
                            ;  
                            
                            //for (var )
                            // a for loop thru obj with price 
//                            // if article is same add price
//                            var l = 0;
//                            while( l < id_attribute_collector.length && )
//                            {
//                             if (id_attribute_collector[l] == 
//                            
//                            }
                            
                            
                            console.log("if"+value);
                            amt_price += (1.5*value);
                            value = 0;
                            
                            $("#amt-"+id_name).html(value);
                            $("#amount").html(amt_price);
                            
                            $("#popup-num-rooms-"+id_name).popup("close");
                        }
                    });
                }
            });
            
             $("#"+ckbx_id).on("click", function() 
             {
                if(!document.getElementById(ckbx_id).checked) 
                 {
                    var 
                         drp = document.getElementById("get-amt-"+id_name)
                        ,value = drp.options[ drp.options.selectedIndex ].value
                    ;  
                     
                     console.log("else"+value);
                    // a for loop thru obj with price 
                    // if article is same add price
//                        for (var l = 0; l < amt_price.length; l++){}
                     
                     
                        console.log(value + " || " + amt_price);
                     
                    amt_price -= (1.5*value);
                    
                    value = 0;  
                    console.log(value + " ^^ " + amt_price);
                        
                    $("#amount").html(amt_price);
                    $("#amt-"+id_name).html(value);
                 }
            });
        }
    });
        

        
    var array_list_of_rooms= [
								"kitchen",
								"dining_room", 
								"lounge", 
								"hall", 
								"laundry",
								"bedroom",
								"garage_outside",
								"sundries"
							 ];

var obj_room_articles =  {
								kitchen: [                                     
											 "fridge_freezer_large", 
											 "fridge_freezer_small",
											 "fridge_double_door",
											 "fridge_large",
											 "fridge_small",
											 "fridge_bar",
											 "freezer",
											 "freezer_chest",
											 "dishwasher",
											 "microwave",
											 "table_large",
											 "table_small",
											 "kitchen_chair",
											 "high_chair",
											 "bar_stool",
											 "cabinet",
											 "cabinet_crystal",
											 "cabinet_china_large",
											 "cabinet_china_small",
											 "cabinet_dresser",
											 "cupboard",
											 "tea_chest",
											 "tea_chest_half",
											 "picture_large",
											 "picture_small",
											 "tidy_rack",
											 "vegie_rack",
											 "box_large_tea_chest_size",
											 "box_small_book_wine_size",
										 ], 


								dining_room: [
											  "bookcase_large",
											  "bookcase_small",
											  "cabinet",
											  "dining_table"
										 ],
								lounge: [
											 "armchair", 
											 "bar", 
											 "bean_bag_small", 
											 "billard_table"
										],
								 hall: [
											"chair",
											"coat_stand",
											"dropside",
											"grandfather_clock"
									   ],
								laundry: [
											"broom",
											"closet",
											"clothes_dryer",
											"ironing_board"
										 ],
								bedroom: [
											"double_bed_matress",
											"matress_single",
											"king_bed",
											"Small_bed"
										 ],
								garage_outside: 
										[
											"bbq",
											"adults_bike",
											"childs_bike",
											"chilly_bin"
										 ],
								sundries: [
											"bean_bag_Large",
											"bench",
											"camp",
											"computer"
										 ]
							};	
        

        
var 
     rooms = 0
    ,arrRooms1 = JSON.parse(localStorage.getItem('room'))
    ,number_of_total_rooms = array_list_of_rooms.length
    ,rooms_to_create = []
    ,id_attribute_collector = []
;


/*run thru all chapters*/
for (i_rooms = 0; i_rooms < number_of_total_rooms ; i_rooms++) 
{
    var  
         crnt_room = array_list_of_rooms[i_rooms]
        ,i_number_of_rooms = arrRooms1[crnt_room]
    ;

    
   if(i_number_of_rooms)
   {
		var j_room_number = 1;
        
        for(j_room_number; j_room_number <= i_number_of_rooms; j_room_number++) 
        {      
             var newPage = $("<div data-role=page data-url=room-" +crnt_room+ "_" +j_room_number+ ">\n"+
                                 "<div data-role=header data-theme=b data-position=fixed data-id=footer>\n"+
                                    "<p class=header-checklist>Volume calculator and checklist</p>\n"+
                                    "<p id=amount class=meter-cubic>0.00</p>\n"+
                                "</div>\n"+
                                "<div data-role=content>\n"+
                                     "<div class=sub-header>\n"+
                                        "<h1 id=sub_header_title_"+crnt_room+"_"+j_room_number+"></h1>\n"+
                                     "</div>\n"+
                                     "<div class=types class=subheader-checklist>\n"+
                                        "<form class=mini id=all_chapter_articles_"+crnt_room+"_"+j_room_number+"></form>\n"+
                                     "</div>\n"+
                                "</div>\n"+
                                "<div data-role=footer data-position=fixed>\n"+
                                    "<button name=toNext id=toNext class=button-next>NEXT</button>\n"+
                                "</div>\n"+
                                "<span id=popup_win_"+crnt_room+"_"+j_room_number+"></span>\n"+
                            "</div>");
                   
            newPage.appendTo('body');

            
            var 
                 k_article_number = 0
                ,tmp_amt = ""
                ,tmp_popup_win = ""
                ,tmp_ckbx_article= ""
            ;


            for (k_article_number ; k_article_number < obj_room_articles[crnt_room].length ; k_article_number++) 
            {  
                var 
                     tmp_article = obj_room_articles[crnt_room][k_article_number]
                    ,id_attribute = tmp_article+"_"+j_room_number+"_"+k_article_number
                ;
                
                id_attribute_collector.push({
                                                id_attribute : id_attribute,
                                                article_name : tmp_article,
                                                room         : crnt_room
                                             });
                

                tmp_ckbx_article += " <input type='checkbox'  name='checkbox_"+id_attribute+"'\n"+                    
                                    " onClick='f_checkbox_articles(this.id)' id='checkbox-"+id_attribute+"'\n"+
                                    " value="+tmp_article+">\n"+" <label for='checkbox-"+id_attribute+"'>\n"+  
                                      tmp_article +"<span id='amt-"+id_attribute+"'\n"+ 
                                    " style='float: right'>0</span></label>";

                tmp_popup_win += " <div data-role='popup' id='popup-num-rooms-"+id_attribute+"'\n"+ 
                                 " style='max-width: 100%;'><div data-role='content'>\n"+
                                 " <h4 id='popup-header-"+id_attribute+"'></h4><form name= 'form_pop_"+id_attribute+"'>\n"+
                                 " <select name='get-amt-"+id_attribute+"'\n"+
                                 " id='get-amt-"+id_attribute+"'>\n"+
                                 " </select></form><button type='submit' name='set-amt-"+id_attribute+"'\n"+ 
                                 " id='set-amt-"+id_attribute+"'\n"+ 
                                 " form='form_pop_"+id_attribute+"'>OK</button></div></div>";
            }
            
            $("#all_chapter_articles_" + crnt_room + "_" + j_room_number).html(tmp_ckbx_article);
            $("#popup_win_" + crnt_room + "_" + j_room_number).html(tmp_popup_win);
            $("#sub_header_title_" + crnt_room + "_" + j_room_number).html(crnt_room + ":" + j_room_number);
        }
    }
    
}

f_set_checkbox_articles(id_attribute_collector);

    </script>
</head>
<body>
    <div  id="aside_estimator"> </div>
</body>
</html>